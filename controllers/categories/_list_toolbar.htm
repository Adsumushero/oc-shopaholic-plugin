<div class="scoreboard">
<div data-control="toolbar">
    <a href="<?= Backend::url('lovata/shopaholic/categories/create') ?>" class="btn btn-primary oc-icon-plus"><?= e(trans('backend::lang.form.create')) ?></a>
    <a href="<?= Backend::url('lovata/shopaholic/categories/reorder') ?>" class="btn btn-info oc-icon-exchange"><?= e(trans('lovata.shopaholic::lang.title.category_reorder')) ?></a>
    <button
        class="btn btn-default oc-icon-trash-o"
        disabled="disabled"
        onclick="$(this).data('request-data', {
            checked: $('.control-list').listWidget('getChecked')
        })"
        data-request="onDelete"
        data-request-confirm="<?= e(trans('backend::lang.list.delete_selected_confirm')) ?>"
        data-trigger-action="enable"
        data-trigger=".control-list input[type=checkbox]"
        data-trigger-condition="checked"
        data-request-success="$(this).prop('disabled', true)"
        data-stripe-load-indicator>
        <?= e(trans('backend::lang.list.delete_selected')) ?>
    </button>
</div>
</div>
<script>
    
    setInterval(function () {
        $.request('onGetQueueLength', {success: function(data) {
            
            var iCount = data.result;
            if(parseInt(iCount) > 0) {
                $('.shopaholic-import-button span').html(' (Отсталось обработать операций: <strong>' + iCount + '</strong>)');
            } else {
                $('.shopaholic-import-button span').html('');
            }
        }});
    }, 10000);
    
</script>
